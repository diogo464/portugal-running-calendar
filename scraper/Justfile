default:
    just --list

install:
    @echo "📦 Installing dependencies with uv..."
    uv sync

lint:
    @echo "🔍 Running ruff linter..."
    uv run ruff check portugal-running-cli.py --fix

format:
    @echo "🎨 Formatting code with black..."
    uv run black portugal-running-cli.py --line-length 120 --target-version py39

typecheck:
    @echo "🔍 Running mypy type checker..."
    uv run mypy portugal-running-cli.py --ignore-missing-imports --no-strict-optional

check: lint format typecheck
    @echo "✅ All code quality checks completed!"

test-scrape:
    @echo "🧪 Testing scrape command with small dataset..."
    python3 portugal-running-cli.py scrape \
        --limit 3 \
        --pages 1 \
        --skip-geocoding \
        --skip-descriptions \
        --output test-output.json
    @echo "📊 Checking output..."
    @if [ -f test-output.json ]; then \
        echo "✅ Output file created successfully"; \
        echo "📈 Event count: $(cat test-output.json | jq length)"; \
        rm test-output.json; \
    else \
        echo "❌ Output file not found"; \
        exit 1; \
    fi
